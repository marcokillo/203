<!doctype html>
<html lang="fa">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ورودی رمز — وینتج</title>

  <!-- فونت‌های کلاسیک (قابل تغییر) -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Old+Standard+TT&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#efe6da; /* وینتج روشن */
      --card:#f8f3ef;
      --accent:#5b3a29;
      --muted:#8b7a6b;
    }
    html,body{height:100%;}
    body{
      margin:0;
      font-family:'Playfair Display', 'Old Standard TT', serif;
      background: radial-gradient(1200px 600px at 10% 20%, rgba(91,58,41,0.06), transparent), var(--bg);
      -webkit-font-smoothing:antialiased;
      direction:rtl;
      color:var(--accent);
      display:flex;align-items:center;justify-content:center;padding:24px;
    }

    /* پس‌زمینهٔ قابل جایگزینی (کاربر تصویر خودش را جایگزین کند) */
    .scene{
      position:relative;
      width:980px;max-width:96vw;height:620px;max-height:86vh;
      border-radius:18px;overflow:hidden;
      box-shadow:0 18px 50px rgba(11,9,8,0.18);
      background-image: url('placeholder-background.jpg'); /* جایگزین کنید */
      background-size:cover;background-position:center;
      display:flex;align-items:center;justify-content:center;
    }

    .vignette{position:absolute;inset:0;background:linear-gradient(to bottom, rgba(255,255,255,0.05), rgba(0,0,0,0.28));pointer-events:none}

    .card{
      position:relative;z-index:5;width:560px;background:linear-gradient(180deg, rgba(255,255,245,0.9), rgba(250,245,240,0.86));
      border-radius:12px;padding:34px 36px 46px;box-shadow:0 8px 30px rgba(10,8,6,0.18);
      border:1px solid rgba(91,58,41,0.06);
      text-align:center;
    }

    h1{font-family:'Cinzel', serif;margin:0 0 8px;font-size:24px;letter-spacing:1px}
    p.lead{margin:0 0 18px;color:var(--muted)}

    label.input-label{display:block;margin:4px 0 8px;font-weight:700;font-family:'Old Standard TT', serif;text-transform:none}

    .input-wrap{display:flex;gap:12px;align-items:center;justify-content:center;margin-top:8px}
    input.code{
      font-family:'Cinzel', 'Times New Roman', serif;
      font-size:36px;padding:12px 18px;border-radius:8px;border:2px solid rgba(91,58,41,0.12);width:220px;text-align:center;outline:none;
      background:transparent;
      -moz-appearance:textfield;
    }
    input.code:focus{box-shadow:0 4px 18px rgba(91,58,41,0.12);border-color:var(--accent)}

    button.btn{
      background:linear-gradient(180deg,var(--accent),#40261a);color:#fff;border:0;padding:12px 18px;border-radius:8px;font-weight:700;cursor:pointer;font-family:'Cinzel';
      box-shadow:0 8px 20px rgba(64,38,26,0.28);
    }

    .hint{margin-top:12px;color:#b34f2f;font-weight:700;min-height:22px}

    /* شمع در پایین صفحه (قابل جایگزینی) */
    .candle{
      position:absolute;bottom:32px;left:32px;z-index:10;display:flex;align-items:flex-end;gap:16px;pointer-events:none;
      animation: fadeIn 1.8s ease-out forwards;
      opacity:0;
    }
    .candle img{height:220px;filter:drop-shadow(0 28px 60px rgba(10,8,6,0.55));border-radius:10px;object-fit:contain}

    /* پاپ‌آپ */
    .modal-backdrop{position:fixed;inset:0;background:rgba(6,4,3,0.52);display:none;align-items:center;justify-content:center;z-index:50}
    .modal{background:var(--card);padding:28px;border-radius:12px;max-width:420px;text-align:center;border:1px solid rgba(91,58,41,0.08);box-shadow:0 20px 60px rgba(6,4,3,0.4)}
    .modal h2{margin:0 0 8px;font-family:'Cinzel'}
    .modal p{margin:0 0 16px}
    .modal button{background:transparent;border:1px solid var(--accent);padding:8px 14px;border-radius:8px;cursor:pointer}

    /* واکنش‌گرایی */
    @media (max-width:720px){
      .card{width:92%;padding:20px}
      .candle img{height:120px}
    }
  </style>
</head>
<body>

<!--
  توضیح: این یک قالب یک‌فایلی HTML/CSS/JS است.
  - برای جایگزینی تصویر پس‌زمینه، فایل placeholder-background.jpg را با عکس خودتان جایگزین کنید (یا مسیر را در CSS تغییر دهید).
  - برای شمعِ پایین صفحه، فایل candle.png را با تصویر شمع واقعی و با کیفیت جایگزین کنید.
-->

<div class="scene" role="application" aria-label="Vintage answer scene">
  <div class="vignette" aria-hidden="true"></div>

  <div class="card" role="region" aria-labelledby="cardTitle">
    <h1 id="cardTitle">یک پاسخ صحیح 4 رقمی را وارد کنید</h1>
    <p class="lead">(کد درست: 1402)</p>

    <form id="codeForm" autocomplete="off">
      <label class="input-label" for="answer">رمز</label>
      <div class="input-wrap">
        <input id="answer" class="code" type="text" inputmode="numeric" maxlength="6" placeholder="____" aria-label="ورود رمز ۴ رقمی" />
        <button type="submit" class="btn">ارسال</button>
      </div>
      <div class="hint" id="hintArea" aria-live="polite"></div>
    </form>

  </div>

  <div class="candle" aria-hidden="true">
    <img id="candleImg" src="candle.png" alt="candle" />
  </div>

</div>

<!-- پاپ‌آپ موفقیت -->
<div class="modal-backdrop" id="modal">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <h2 id=\"modalTitle\">پاسخ درست است</h2></h2>
    <p>لطفا پاکت 203 را باز کنید</p>
    <button id="closeModal">باشه</button>
  </div>
</div>

<script>
  // نگاشت ارقام فارسی/عربی به ارقام لاتین
  const persianDigits = ['۰','۱','۲','۳','۴','۵','۶','۷','۸','۹'];
  const arabicDigits  = ['٠','١','٢','٣','٤','٥','٦','٧','٨','٩'];
  function normalizeDigits(str){
    if(!str) return '';
    let out = '';
    for(const ch of str){
      if(persianDigits.indexOf(ch) > -1) out += persianDigits.indexOf(ch);
      else if(arabicDigits.indexOf(ch) > -1) out += arabicDigits.indexOf(ch);
      else out += ch;
    }
    return out.replace(/[^0-9]/g,'').trim();
  }

  const correct = '' // رمز درست حذف شد (اینجا مقدار قرار دهید); // جواب درست
  const form = document.getElementById('codeForm');
  const input = document.getElementById('answer');
  const hint = document.getElementById('hintArea');
  const modal = document.getElementById('modal');
  const closeModal = document.getElementById('closeModal');

  form.addEventListener('submit', (e)=>{
    e.preventDefault();
    hint.textContent = '';
    let val = input.value || '';
    val = normalizeDigits(val);

    if(val.length !== 4){
      hint.textContent = 'کد باید ۴ رقم باشد؛ دوباره تلاش کنید.';
      return;
    }

    if(val === correct){
      // نمایش پاپ‌آپ
      modal.style.display = 'flex';
      // خوانایی و فوکوس
      closeModal.focus();
    } else {
      // انیمیشن خطا کوچک
      hint.textContent = 'دوباره تلاش کنید';
      input.animate([
        { transform: 'translateX(0)' },
        { transform: 'translateX(-8px)' },
        { transform: 'translateX(8px)' },
        { transform: 'translateX(0)' }
      ], { duration: 420, easing: 'ease-out' });
    }
  });

  closeModal.addEventListener('click', ()=>{
    modal.style.display = 'none';
    input.value = '';
    input.focus();
  });

  // دسترسی: بستن با ESC
  window.addEventListener('keydown', (e)=>{
    if(e.key === 'Escape') modal.style.display = 'none';
  });

</script>

</body>
</html>
